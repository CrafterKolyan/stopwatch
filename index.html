<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Stopwatch | crafterkolyan.github.io</title>

    <meta charset="UTF-8">
    <meta name="description" content="Stopwatch, Static Web Applications, Open Offline Web Applications">
    <meta name="keywords" content="Stopwatch, Static, Web, Application, Open, Offline">
    <meta name="author" content="CrafterKolyan">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
      body {
        font-family: -apple-system,BlinkMacSystemFont,"Segoe UI","Noto Sans",Helvetica,Arial,sans-serif,"Apple Color Emoji","Segoe UI Emoji";
        word-wrap: break-word;
      }
    </style>

    <script>
      function zeroPad(num, places) {
        var zeros = places - num.toString().length + 1;
        return Array(+(zeros > 0 && zeros)).join("0") + num.toString();
      }

      function prettyTime(milliseconds) {
        let seconds = milliseconds / 1000
        let minutes = seconds / 60
        let hours = Math.floor(minutes / 60)
        minutes = Math.floor(minutes % 60)
        seconds = Math.floor(seconds % 60)
        milliseconds = Math.floor(milliseconds % 1000)
        return hours.toString() + ":" + zeroPad(minutes, 2) + ":" + zeroPad(seconds, 2) + "." + zeroPad(milliseconds, 3)
      }

      function updateTime(time_passed) {
        document.getElementById("stopwatch").textContent = prettyTime(time_passed)
      }

      function updateStopwatch() {
          let time_passed = Date.now() - window.stopwatch_start_time
          updateTime(time_passed)
      }

      function startStopwatch() {
        if (typeof stopwatch_start_time === 'undefined') {
          window.stopwatch_start_time = Date.now()
          window.stopwatch_interval = setInterval(updateStopwatch, 13)
        }
      }

      function stopStopwatch() {
        if (typeof stopwatch_start_time !== 'undefined') {
          updateStopwatch()
          clearInterval(window.stopwatch_interval)
          delete window.stopwatch_interval
          delete window.stopwatch_start_time
        }
      }

      updateTime(0)
    </script>
  </head>
  <body>
    <center>
        <h1>Stopwatch</h1>
        <h2 id="stopwatch">0:00:00.000<h2>
        <button onmousedown="startStopwatch()" ontouchstart="startStopwatch()">Start</button>
        <button onmousedown="stopStopwatch()" ontouchstart="stopStopwatch()">Stop</button>
    </center>
  </body>
</html>
