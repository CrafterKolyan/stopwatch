<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Stopwatch | crafterkolyan.github.io</title>

    <meta charset="UTF-8">
    <meta name="description" content="Stopwatch, Static Web Applications, Open Offline Web Applications">
    <meta name="keywords" content="Stopwatch, Static, Web, Application, Open, Offline">
    <meta name="author" content="CrafterKolyan">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
      body {
        font-family: system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";
        word-wrap: break-word;
      }

      button {
        font-size: 1.5rem;
        padding: 0.375rem 0.75rem;
        border: 1px solid;
        border-radius: 0.25rem;
        margin: 0.25rem;
      }

      .stopwatch-time {
        font-size: 3rem;
      }

      .stopwatch {
        border: 1px solid;
        border-radius: 0.75rem;
        display: table;
        padding: 1rem;
      }
    </style>

    <script>
      function zeroPad(num, places) {
        var zeros = places - num.toString().length + 1;
        return Array(+(zeros > 0 && zeros)).join("0") + num.toString();
      }

      function prettyTime(milliseconds) {
        let seconds = milliseconds / 1000
        let minutes = seconds / 60
        let hours = Math.floor(minutes / 60)
        minutes = Math.floor(minutes % 60)
        seconds = Math.floor(seconds % 60)
        milliseconds = Math.floor(milliseconds % 1000)
        return hours.toString() + ":" + zeroPad(minutes, 2) + ":" + zeroPad(seconds, 2) + "." + zeroPad(milliseconds, 3)
      }

      function updateTime(time_passed) {
        document.getElementById("stopwatch").textContent = prettyTime(time_passed)
      }

      function updateStopwatch() {
          let time_passed = Date.now() - window.stopwatch_start_time
          updateTime(time_passed)
      }

      function startStopwatch() {
        if (typeof stopwatch_start_time === 'undefined') {
          window.stopwatch_start_time = Date.now()
          window.stopwatch_interval = setInterval(updateStopwatch, 13)
          document.getElementById("start").disabled = true
          document.getElementById("stop").disabled = false
        }
      }

      function stopStopwatch() {
        if (typeof stopwatch_start_time !== 'undefined') {
          updateStopwatch()
          clearInterval(window.stopwatch_interval)
          delete window.stopwatch_interval
          delete window.stopwatch_start_time
          document.getElementById("stop").disabled = true
          document.getElementById("start").disabled = false
        }
      }

      updateTime(0)
    </script>
  </head>
  <body>
    <center>
        <h1>Stopwatch</h1>
        <div class="stopwatch">
          <h2 id="stopwatch" class="stopwatch-time">0:00:00.000</h2>
          <button id="start" onmousedown="startStopwatch()" ontouchstart="startStopwatch()">Start</button>
          <button id="stop" onmousedown="stopStopwatch()" ontouchstart="stopStopwatch()" disabled>Stop</button>
        </div>
    </center>
  </body>
</html>
